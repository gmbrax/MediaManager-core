####################################################################################################################
# WARNING: Do not store sensitive information in this file, as its contents will be included in the Qodana report. #
####################################################################################################################

version: "1.0"
# Use canonical linter name to avoid image warnings and CLI flag issues
linter: qodana-jvm
profile:
  name: qodana.recommended
bootstrap: |
  # Generate sources (including protobuf) so Qodana resolves imports correctly.
  # Use a POSIX-safe, fi-less chain to avoid /bin/sh parsing issues in CI.
  chmod +x ./mvnw 2>/dev/null || true
  ./mvnw -B -q -DskipTests -DskipITs=true generate-sources 2>/dev/null || \
  sh ./mvnw -B -q -DskipTests -DskipITs=true generate-sources 2>/dev/null || \
  mvn -B -q -DskipTests -DskipITs=true generate-sources 2>/dev/null || \
  echo "[Qodana bootstrap] Maven not available; skipping source generation"
include:
  - name: CheckDependencyLicenses
exclude:
  # Exclude generated sources from inspections to reduce noise
  - name: All
    paths:
      - target/generated-sources/**
      - target/protoc-dependencies/**